"use strict";(self["webpackChunkvue_system"]=self["webpackChunkvue_system"]||[]).push([[882],{9109:function(e,t,r){r.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"add"==e.type?"添加规格":"编辑规格",visible:e.dialogFormVisible,center:"",width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"规格ID",prop:"cid"}},[t("el-input",{attrs:{disabled:e.unchangable},model:{value:e.ruleForm.cid,callback:function(t){e.$set(e.ruleForm,"cid",t)},expression:"ruleForm.cid"}})],1),t("el-form-item",{attrs:{label:"类目ID",prop:"id"}},[t("el-input",{model:{value:e.ruleForm.id,callback:function(t){e.$set(e.ruleForm,"id",t)},expression:"ruleForm.id"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"规格设置",prop:"rule"}},[t("WangEditor",{ref:"rule",attrs:{desc:e.ruleForm.rule}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("重置 ")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)],1)},l=[],s=r(3468),i={name:"Dialog",components:{WangEditor:s.Z},data(){return{dialogFormVisible:!1,type:"add",ruleForm:{id:"",cid:"",name:"",rule:""},rules:{name:[{required:!0,message:"请输入类目名称",trigger:"blur"}],cid:[{required:!0,message:"请输入规格ID",trigger:"blur"}],id:[{required:!0,message:"请输入类目ID",trigger:"blur"}]}}},computed:{unchangable(){return"edit"==this.type}},mounted(){this.$bus.$on("openRuleDialog",((e,t={})=>{this.dialogFormVisible=!0,this.resetForm(),this.type=e,"edit"==this.type&&(this.ruleForm=t,console.log(this.ruleForm))}))},methods:{submitForm(){this.ruleForm.rule=this.$refs.rule.editor.txt.text(),this.$refs["ruleForm"].validate((async e=>{if(!e)return this.$message({showClose:!0,message:"请按要求输入",type:"error"}),!1;"add"==this.type?await this.$store.dispatch("addRule",this.ruleForm).then((e=>{e&&(this.dialogFormVisible=!1,this.$router.go(0),this.resetForm())})):await this.$store.dispatch("updateRules",this.ruleForm).then((e=>{this.dialogFormVisible=!1,this.$router.go(0),this.resetForm(),this.type="add"}))}))},resetForm(){this.ruleForm={id:"",cid:"",name:"",rule:""},this.$bus.$emit("clear")}}},o=i,n=r(1001),u=(0,n.Z)(o,a,l,!1,null,null,null),d=u.exports},7042:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"order"}},[t("div",{staticClass:"search"},[t("el-input",{attrs:{placeholder:"输入关键字进行搜索……"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"}},[e._v(e._s(e.$t("content.search")))]),t("el-button",{attrs:{type:"primary"}},[e._v("添加订单")])],1),t("main",[t("el-table",{ref:"tables",attrs:{data:e.tableData,border:"",align:"center","header-align":"center",height:"400px"}},[t("el-table-column",{attrs:{prop:"order_id",label:"订单号",width:"80"}}),t("el-table-column",{attrs:{prop:"goods_name",label:"商品列表"}}),t("el-table-column",{attrs:{prop:"goods_price",label:"订单总价"}}),t("el-table-column",{attrs:{prop:"goods_num",label:"商品数量",width:"80"}}),t("el-table-column",{attrs:{prop:"order_status",label:"支付状态",width:"80"}}),t("el-table-column",{attrs:{prop:"uId",label:"顾客ID",width:"80"}}),t("el-table-column",{staticClass:"buttonss",attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticClass:"edit",attrs:{size:"mini"}},[e._v("编辑")]),t("el-button",{staticClass:"edit",attrs:{size:"mini",type:"danger"}},[e._v("删除")])]}}])})],1)],1),t("RuleDialog"),t("div",{staticClass:"toolbar"},[t("Excel",{staticClass:"excel",attrs:{formTitle:"类目",field:e.json_fields,formData:e.allData,name:"商品类目"}}),t("TXT",{attrs:{txtHeadTitle:e.txtHeadTitle,name:"所有类目",txtData:e.allData}}),t("el-button",{attrs:{type:"success"},on:{click:e.pdf}},[e._v("导出为pdf文件")]),t("PDF")],1),t("Pagination",{attrs:{total:e.total,pageSize:e.pageSize,pageNo:e.pageNo,currentPage:e.currentPage}})],1)},l=[],s=r(8133),i=r(7758),o=r(1659),n=r(9109),u=r(6737),d=r(3822),m={name:"Order",components:{Pagination:s.Z,Excel:o.Z,TXT:i.Z,RuleDialog:n.Z,PDF:u.Z},data(){return{tableData:[],keyword:"",pageNo:1,pageSize:4,total:0,currentPage:1,type:"all",json_fields:{"规格ID":"cid","类目ID":"id","名称":"name","规格设置":"rule"}}},created(){this.getData()},computed:{...(0,d.rn)({allData:e=>e.params.allData}),txtHeadTitle(){return Object.keys(this.json_fields).join(" ")}},methods:{async getData(e=1,t=4){await this.$api.getorders().then((e=>{this.pageNo=parseInt(e.pageNo),this.pageSize=4,this.total=e.length,this.currentPage=this.pageNo,this.tableData=e.data,this.type="all",this.$message.error("在线演示时，只能显示所有订单，其他功能无法使用")}))},pdf(){this.$bus.$emit("pdf")}}},c=m,p=r(1001),h=(0,p.Z)(c,a,l,!1,null,"0ee75627",null),b=h.exports}}]);